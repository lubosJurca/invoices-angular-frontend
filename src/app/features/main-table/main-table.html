<div class="min-h-2/3">
  @if(tableData$ | async; as tableData){ @if(tableData.length > 0){

  <p-table
    [value]="tableData"
    [loading]="loading$ | async"
    [paginator]="true"
    [rows]="10"
    [tableStyle]="{ 'min-width': '50rem' }"
    [rowsPerPageOptions]="[ 10, 20, 30]"
    stripedRows
    sortField="createdAt"
    [sortOrder]="-1"
  >
    <ng-template #header>
      <tr>
        <th pSortableColumn="createdAt">
          <div class="flex items-center gap-2">
            Created
            <p-sortIcon field="createdAt" />
          </div>
        </th>
        <th pSortableColumn="dueDate">
          <div class="flex items-center gap-2">
            Due Date
            <p-sortIcon field="dueDate" />
          </div>
        </th>
        <th pSortableColumn="clientName">
          <div class="flex items-center gap-2">
            Name
            <p-sortIcon field="clientName" />
          </div>
        </th>
        <th pSortableColumn="total">
          <div class="flex items-center gap-2">
            Amount
            <p-sortIcon field="total" />
          </div>
        </th>
        <th pSortableColumn="status">
          <div class="flex items-center gap-2">
            Status
            <p-sortIcon field="status" />
          </div>
        </th>
        <th>Detail</th>
      </tr>
    </ng-template>
    <ng-template #body let-data>
      <tr>
        <td>{{data.createdAt | date}}</td>
        <td>{{data.dueDate | date}}</td>
        <td>{{data.clientName}}</td>
        <td>{{data.total | currency}}</td>
        <td>
          <p-tag [value]="data.status" [severity]="getSeverity(data.status)" />
        </td>
        <td>
          <button
            (click)="navigateToDetail(data._id!)"
            class="text-black dark:text-gray-300 dark:hover:text-gray-600 hover:text-gray-300 cursor-pointer font-semibold"
            type="button"
          >
            >>
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  } } @else {
  <div class="rounded-lg p-16 text-center">
    <div class="max-w-md mx-auto">
      <!-- Modern empty state illustration -->
      <div class="relative mb-8">
        <div
          class="w-24 h-24 bg-white rounded-2xl shadow-sm mx-auto flex items-center justify-center border-2 border-gray-100"
        >
          <i class="pi pi-file-o text-4xl text-gray-300"></i>
        </div>
        <div
          class="absolute -top-1 -right-1 w-6 h-6 bg-blue-100 rounded-full"
        ></div>
        <div
          class="absolute -bottom-2 -left-2 w-4 h-4 bg-purple-100 rounded-full"
        ></div>
      </div>

      <h3 class="text-xl font-semibold text-gray-700 mb-2">
        @if ((filterStatus$ | async) === 'all') { Your invoice list is empty }
        @else { No {{ (filterStatus$ | async) }} invoices }
      </h3>

      <p class="text-gray-500 text-sm">
        @if ((filterStatus$ | async) === 'all') { Invoices you create will be
        displayed here } @else { Try changing the filter to see other invoices }
      </p>
    </div>
  </div>
  }
</div>
